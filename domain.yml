version: "3.1"

intents:
  - saludo
  - despedir
  - afirmar
  - denegar
  - bien
  - triste
  - bot_reto
  - solicitar_login
  - solicitar_registro
  - proporcionar_credenciales
  - session_start
  - solicitar_prediccion
  - solicitar_historial
  - proporcionar_email

entities:
  - usuario
  - contraseÃ±a
  - email
  - dia_semana
  - control_cruce
  - detalle_cruce
  - condiciones_luz
  - distrito
  - superficie_via
  - tipo_via
  - velocidad
  - area
  - clima
  - tipo_vehiculo
  - numero_victimas
  - numero_vehiculos

slots:
  usuario:
    type: text
    mappings:
      - type: from_entity
        entity: usuario
  
  contraseÃ±a:
    type: text
    mappings:
      - type: from_entity
        entity: contraseÃ±a
  
  email:
    type: text
    mappings:
      - type: from_entity
        entity: email
  
  id_usuario:
    type: text
    mappings:
      - type: custom
  
  autenticado:
    type: bool
    initial_value: false
    mappings:
      - type: custom

  # Slots para la predicciÃ³n
  day_of_week:
    type: float
    mappings:
      - type: from_entity
        entity: dia_semana
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: day_of_week

  junction_control:
    type: float
    mappings:
      - type: from_entity
        entity: control_cruce
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: junction_control

  junction_detail:
    type: float
    mappings:
      - type: from_entity
        entity: detalle_cruce
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: junction_detail

  light_conditions:
    type: float
    mappings:
      - type: from_entity
        entity: condiciones_luz
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: light_conditions

  local_authority:
    type: float
    mappings:
      - type: from_entity
        entity: distrito
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: local_authority

  road_surface:
    type: float
    mappings:
      - type: from_entity
        entity: superficie_via
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: road_surface

  road_type:
    type: float
    mappings:
      - type: from_entity
        entity: tipo_via
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: road_type

  speed_limit:
    type: float
    mappings:
      - type: from_entity
        entity: velocidad
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: speed_limit

  urban_rural:
    type: float
    mappings:
      - type: from_entity
        entity: area
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: urban_rural

  weather:
    type: float
    mappings:
      - type: from_entity
        entity: clima
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: weather

  vehicle_type:
    type: float
    mappings:
      - type: from_entity
        entity: tipo_vehiculo
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: vehicle_type

  casualties:
    type: float
    mappings:
      - type: from_entity
        entity: numero_victimas
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: casualties

  num_vehicles:
    type: float
    mappings:
      - type: from_entity
        entity: numero_vehiculos
      - type: from_text
        conditions:
         - active_loop: prediccion_form
           requested_slot: num_vehicles

forms:
  prediccion_form:
    required_slots:
      - day_of_week
      - junction_control
      - junction_detail
      - light_conditions
      - local_authority
      - road_surface
      - road_type
      - speed_limit
      - urban_rural
      - weather
      - vehicle_type
      - casualties
      - num_vehicles

responses:
  utter_saludo:
  - text: "Â¡Hola! Â¿CÃ³mo estÃ¡s?"
  - text: "Â¡Hola! Â¿QuÃ© tal tu dÃ­a?"
  - text: "Â¡Buenas! Â¿CÃ³mo te va?"
  - text: "Â¡Hey! Â¿CÃ³mo andas?"
  - text: "Â¡Saludos! Â¿Todo bien?"

  utter_animar:
  - text: "AquÃ­ tienes algo para animarte:"
    image: "https://i.imgur.com/nGF1K8f.jpg"
  - text: "Â¡Ãnimo! Mira esto:"
    image: "https://i.imgur.com/nGF1K8f.jpg"
  - text: "Esto te va a alegrar el dÃ­a:"
    image: "https://i.imgur.com/nGF1K8f.jpg"

  utter_ayudo:
  - text: "Â¿Te ayudo en algo?"
  - text: "Â¿Puedo ayudarte?"
  - text: "Â¿Necesitas algo?"
  - text: "Â¿En quÃ© te puedo asistir?"
  - text: "Â¿Hay algo en lo que pueda ayudarte?"

  utter_feliz:
  - text: "Â¡Genial, sigue adelante!"
  - text: "Â¡Excelente! Me alegro mucho."
  - text: "Â¡FantÃ¡stico! Sigue asÃ­."
  - text: "Â¡QuÃ© bien! Me encanta escuchar eso."
  - text: "Â¡Perfecto! ContinÃºa con esa actitud."

  utter_despedida:
  - text: "Â¡Hasta luego! CuÃ­date. ğŸ‘‹"
  - text: "Â¡AdiÃ³s! Que tengas un excelente dÃ­a. ğŸ˜Š"
  - text: "Â¡Nos vemos pronto! Maneja con cuidado. ğŸš—"
  - text: "Â¡Hasta la prÃ³xima! Recuerda siempre la seguridad vial. ğŸ›¡ï¸"
  - text: "Â¡Chao! Espero haberte ayudado. ğŸ‘"

  utter_soy_bot:
  - text: "Soy un bot especializado en anÃ¡lisis de accidentes de trÃ¡nsito, creado con Rasa. ğŸ¤–"
  - text: "Soy un asistente virtual creado por Rasa para ayudarte con predicciones de severidad de accidentes. ğŸš¦"
  - text: "Soy un bot inteligente que analiza la severidad de accidentes vehiculares. ğŸš—"

  utter_pedir_credenciales_registro:
  - text: "ğŸ“ Para registrarte, necesito tu usuario y contraseÃ±a.\n\nEscribe en formato:\nusuario: tu_usuario, contraseÃ±a: tu_contraseÃ±a"
  - text: "ğŸ” Por favor ingresa tus datos de registro:\n\nFormato: usuario: tu_usuario, contraseÃ±a: tu_contraseÃ±a"
  - text: "âœï¸ Necesito que me proporciones:\n\nâ€¢ Usuario\nâ€¢ ContraseÃ±a\n\nFormato: usuario: tu_usuario, contraseÃ±a: tu_contraseÃ±a"

  utter_solicitar_login_inicial:
  - text: "ğŸ” Para comenzar a usar el chat, necesitas iniciar sesiÃ³n.\n\nÂ¿Ya tienes una cuenta o necesitas registrarte?"
  - text: "ğŸ‘‹ Â¡Bienvenido!\n\nPara acceder al sistema, por favor inicia sesiÃ³n o regÃ­strate si es tu primera vez."
  - text: "ğŸš¦ Para utilizar el sistema de predicciÃ³n de accidentes, primero debes autenticarte.\n\nÂ¿Tienes cuenta o necesitas crear una?"
  - text: "ğŸ”’ Hola! Este es un sistema protegido.\n\nPor favor, inicia sesiÃ³n o regÃ­strate para continuar."
  - text: "ğŸ‘¤ Â¡Hola! Necesito que inicies sesiÃ³n para poder ayudarte.\n\nÂ¿Ya tienes cuenta?"

  utter_bienvenida_post_login:
  - text: "ğŸ‰ Â¡Bienvenido al Sistema de PredicciÃ³n de Severidad de Accidentes!\n\nğŸš— Puedo ayudarte a predecir quÃ© tan grave podrÃ­a ser un accidente basÃ¡ndome en diferentes factores.\n\nğŸ“Š Te darÃ© una predicciÃ³n sobre si el accidente podrÃ­a ser:\nâ€¢ ğŸ’š Leve (sin heridos graves)\nâ€¢ ğŸš‘ Grave (con heridos)\nâ€¢ ğŸš¨ Muy grave (con fallecidos)\n\nğŸ’¬ Escribe 'quiero hacer una predicciÃ³n' para comenzar.\nğŸ“‹ O 'ver mi historial' para consultar tus predicciones anteriores.\n\nÂ¿En quÃ© puedo ayudarte hoy?"
  - text: "âœ¨ Â¡Genial! Ya estÃ¡s dentro del sistema.\n\nğŸ¤– Soy tu asistente de anÃ¡lisis de accidentes de trÃ¡nsito.\n\nğŸ¯ Te darÃ© predicciones precisas para ayudarte a entender el nivel de riesgo.\n\nğŸ’¬ Di 'hacer predicciÃ³n' cuando estÃ©s listo.\nğŸ“§ O 'ver historial' para revisar tus anÃ¡lisis anteriores.\n\nÂ¿QuÃ© informaciÃ³n necesitas?"

  utter_pedir_email:
  - text: "ğŸ“§ Por favor, proporciona tu correo electrÃ³nico donde quieres recibir el historial.\n\nEjemplo: micorreo@ejemplo.com"
  - text: "ğŸ“¬ Â¿A quÃ© correo electrÃ³nico te lo envÃ­o?\n\nEscribe tu email."
  - text: "âœ‰ï¸ Necesito tu direcciÃ³n de correo para enviarte el PDF.\n\nÂ¿CuÃ¡l es tu email?"

  utter_ask_day_of_week:
  - text: "ğŸ“… Â¿En quÃ© dÃ­a de la semana ocurre/ocurriÃ³ el accidente?\n\n0: Domingo\n1: Lunes\n2: Martes\n3: MiÃ©rcoles\n4: Jueves\n5: Viernes\n6: SÃ¡bado\n\nEscribe el nÃºmero:"

  utter_ask_junction_control:
  - text: "ğŸš¦ Â¿QuÃ© tipo de control hay en el cruce?\n\n0: Sin control\n1: SeÃ±ales de stop\n2: SemÃ¡foro\n3: Rotonda\n4: SemÃ¡foro con sensor\n5: SeÃ±ales de prioridad\n6: Otro control\n\nEscribe el nÃºmero:"

  utter_ask_junction_detail:
  - text: "ğŸ”€ Â¿QuÃ© tipo de cruce es?\n\n0: Cruce simple\n1: Cruce en T\n2: Cruce en Y\n3: Cruce mÃºltiple\n4: Rotonda\n5: Entrada/salida privada\n6: Otro\n\nEscribe el nÃºmero:"

  utter_ask_light_conditions:
  - text: "ğŸ’¡ Â¿CuÃ¡les son las condiciones de luz?\n\n0: Plena luz del dÃ­a\n1: Oscuro sin iluminaciÃ³n\n2: Oscuro con iluminaciÃ³n\n3: Amanecer/Atardecer\n4: Niebla o humo\n5: Otro\n\nEscribe el nÃºmero:"

  utter_ask_local_authority:
  - text: "ğŸ“ Â¿En quÃ© distrito ocurre?\n\nOpciones: 0, 1, 3, 4, 76, 159, 176, 267, 384\n\nEscribe el nÃºmero:"

  utter_ask_road_surface:
  - text: "ğŸ›£ï¸ Â¿CuÃ¡l es la condiciÃ³n de la superficie de la vÃ­a?\n\n0: Asfalto seco\n1: Asfalto hÃºmedo\n2: Hielo o nieve\n3: Grava\n4: Otro\n\nEscribe el nÃºmero:"

  utter_ask_road_type:
  - text: "ğŸš— Â¿QuÃ© tipo de vÃ­a es?\n\n0: Calle\n1: Avenida\n2: Carretera principal\n3: Carretera secundaria\n4: Rotonda\n5: Otro\n\nEscribe el nÃºmero:"

  utter_ask_speed_limit:
  - text: "âš¡ Â¿CuÃ¡l es el lÃ­mite de velocidad en km/h?\n\nEscribe el nÃºmero:"

  utter_ask_urban_rural:
  - text: "ğŸ™ï¸ Â¿El Ã¡rea es urbana o rural?\n\n0: Urbano\n1: Rural\n\nEscribe el nÃºmero:"

  utter_ask_weather:
  - text: "ğŸŒ¤ï¸ Â¿CuÃ¡les son las condiciones climÃ¡ticas?\n\n0: Despejado\n1: Lluvia ligera\n2: Lluvia intensa\n3: Niebla\n4: Nieve\n5: Viento fuerte\n6: Otro\n\nEscribe el nÃºmero:"

  utter_ask_vehicle_type:
  - text: "ğŸš™ Â¿QuÃ© tipo de vehÃ­culo estÃ¡ involucrado?\n\n0: Coche\n1: Motocicleta\n2: CamiÃ³n\n3: AutobÃºs\n4: Bicicleta\n5: PeatÃ³n\n6: Otro\n\nEscribe el nÃºmero:"

  utter_ask_casualties:
  - text: "ğŸš‘ Â¿CuÃ¡ntas vÃ­ctimas potenciales hay?\n\n0: Sin vÃ­ctimas\n1: 1 vÃ­ctima\n2: 2 vÃ­ctimas\n3: 3 vÃ­ctimas\n4: 4 vÃ­ctimas\n5: 5 vÃ­ctimas o mÃ¡s\n\nEscribe el nÃºmero:"

  utter_ask_num_vehicles:
  - text: "ğŸš—ğŸš— Â¿CuÃ¡ntos vehÃ­culos estÃ¡n involucrados?\n\n1: 1 vehÃ­culo\n2: 2 vehÃ­culos\n3: 3 vehÃ­culos\n4: 4 vehÃ­culos\n5: 5 vehÃ­culos o mÃ¡s\n\nEscribe el nÃºmero:"

  utter_prediccion_iniciada:
  - text: "ğŸ”® Â¡Perfecto! Voy a hacerte algunas preguntas para analizar el accidente.\n\nğŸ“ Son 13 preguntas rÃ¡pidas. Â¡Empecemos!"

actions:
  - action_login
  - action_registro
  - action_verificar_autenticacion
  - action_session_start
  - action_hacer_prediccion
  - action_enviar_historial
  - validate_prediccion_form

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false