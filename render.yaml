services:
  # Servicio para el Servidor de Acciones
  - type: web
    name: chatbot-actions
    env: docker
    dockerfilePath: ./Dockerfile.action
    plan: free
    envVars:
      - key: PORT
        value: 5055

  # Servicio para el Servidor Rasa (Core + NLU)
  - type: web
    name: chatbot-rasa
    env: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: PORT
        value: 5005
      - key: RASA_TELEMETRY_ENABLED
        value: "false"
      # URL del servidor de acciones (nombre del servicio + puerto)
      - key: ACTION_ENDPOINT_URL
        value: http://chatbot-actions:5055/webhook
      
      # Variables para WhatsApp (Render te pedir√° estos valores al crear el servicio)
      - key: FACEBOOK_VERIFY_TOKEN
        sync: false
      - key: FACEBOOK_APP_SECRET
        sync: false
      - key: FACEBOOK_PAGE_ACCESS_TOKEN
        sync: false
      - key: WHATSAPP_PHONE_NUMBER_ID
        sync: false
